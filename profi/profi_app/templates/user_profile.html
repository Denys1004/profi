<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Righteous&display=swap" rel="stylesheet">
    <title>Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Trade+Winds&display=swap" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <script defer src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
    <script defer src="{% static 'js/main.js' %}"></script>
</head>
<body>
    {% include 'navbar.html' %}


    
    <h1>{{ user.first_name }}'s profile page</h1>
    <p>{{ user.first_name }} {{ user.last_name }}</p>
    <p>{{ user.email }}</p>

    <!-- For logged in user -->
    {% if user.id == request.session.user_id %}
        <h3>All {{ user.first_name }}'s jobs!</h3>
        <table class="table table-bordered mt-1">
            <thead class="thead-dark">
                <tr>
                    <th>Job</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for job in all_jobs %}
                    <!-- if logged user doing this job, display this -->
                    {% if job.executor != null and job.executor.id == request.session.user_id %}
                    <tr>
                        <td>{{ job.title }}</td>
                        <td>
                            <a href="/view/{{job.id}}">View | </a> 
                            <a href="/done_job/{{job.id}}">Done |</a>  
                            <a href="/giveup_job/{{job.id}}">GiveUp</a>
                        </td>                        
                    </tr>
                    {% endif%}
                {% endfor %}
            </tbody>
        </table>
        <h3>All jobs posted by {{ user.first_name }}</h3>
        {% for posted_job in all_posted_jobs %}
        <p>{{ posted_job.title }}</p>
        <p>{{ posted_job.location }}</p>
        {% endfor %}
    {% else %}
        <h3>All jobs posted by {{ user.first_name }}</h3>
        {% for posted_job in all_posted_jobs %}
        <p>{{ posted_job.title }}</p>
        <p>{{ posted_job.location }}</p>
        {% endfor %}
    {% endif %}



    <!-- {% if user.id == request.session.user_id %}
        {% if job.executor != null and job.executor.id == request.session.user_id %}
            <h3>My active jobs</h3>
            {% for active_job in all_active_jobs %}
                <p>{{ active_job.title }}</p>
                <p>{{ active_job.description }}</p>
                <p>{{ active_job.location }}</p>
                <a href="/view/{{active_job.id}}">View | </a> 
                <a href="/done_job/{{active_job.id}}">Done |</a>  
                <a href="/giveup_job/{{active_job.id}}">GiveUp</a>
            {% endfor %}
        {% endif %}
    {% endif %} -->

    <!-- For all -->




    {% include 'footer.html' %}
    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
</body>
</html>
